#!/bin/bash
# ============================================================================
# PostgreSQL 포트 설정 스크립트
# 컨테이너 내부에서 PostgreSQL이 사용할 포트를 설정합니다.
#
# 사용법:
#   1. 이 파일을 02-set-port.sh로 복사
#   2. POSTGRES_PORT 값을 원하는 포트 번호로 수정
#   3. docker-compose.override.yml의 포트 매핑과 일치시키기
#
# 주의사항:
#   - 이 스크립트는 데이터베이스 초기화 시에만 실행됩니다
#   - 기존 데이터가 있으면 실행되지 않으므로, 볼륨을 삭제하고 재생성해야 합니다
#   - 포트 변경 시 docker-compose.override.yml도 함께 수정해야 합니다
# ============================================================================

# 사용할 PostgreSQL 포트 (기본값: 5432)
POSTGRES_PORT=5432

# postgresql.conf에 포트 설정 추가
echo "port = ${POSTGRES_PORT}" >> "$PGDATA/postgresql.conf"

echo "PostgreSQL port set to ${POSTGRES_PORT}"
